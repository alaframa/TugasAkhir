{% extends "base.html" %}
{% block title %}
{{title}}
{% endblock %}

{% block content %}

<form class="container mt-5" id="signupForm" action="#" method="post">
    <div class="form-group">
        <label for="email">Email address</label>
        <input type="email" class="form-control" id="email" placeholder="Enter email" name="email" required>
        <div class="invalid-feedback">
            Please enter a valid email address.
        </div>
    </div>
    <div class="form-group">
        <label for="username">Username</label>
        <input type="text" class="form-control" id="username" placeholder="Enter username" name="username" required>
        <div class="invalid-feedback">
            Username cannot be empty.
        </div>
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <input type="password" class="form-control" id="password" placeholder="Enter password" name="password" required>
        <div class="invalid-feedback">
            Password cannot be empty.
        </div>
    </div>
    <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm password"
            name="retypepassword" required>
        <div class="invalid-feedback" id="passwordMismatchFeedback">
            Passwords do not match.
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Sign Up</button>
</form>

<script>
    document.getElementById('signupForm').addEventListener('submit', function (event) {
        event.preventDefault();

        let form = event.target;
        let email = form.email;
        let username = form.username;
        let password = form.password;
        let confirmPassword = form.confirmPassword;

        form.classList.remove('was-validated');
        email.classList.remove('is-invalid');
        username.classList.remove('is-invalid');
        password.classList.remove('is-invalid');
        confirmPassword.classList.remove('is-invalid');
        document.getElementById('passwordMismatchFeedback').style.display = 'none';

        let isValid = true;

        if (!email.checkValidity()) {
            email.classList.add('is-invalid');
            isValid = false;
        }

        if (!username.value) {
            username.classList.add('is-invalid');
            isValid = false;
        }

        if (!password.value) {
            password.classList.add('is-invalid');
            isValid = false;
        }

        if (password.value !== confirmPassword.value) {
            confirmPassword.classList.add('is-invalid');
            document.getElementById('passwordMismatchFeedback').style.display = 'block';
            isValid = false;
        }

        if (isValid) {
            form.classList.add('was-validated');
            // Here you can add code to send the form data to the server
            console.log('Form submitted');
        }
    });
</script>

{% endblock %}